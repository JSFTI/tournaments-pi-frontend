import{d as N,y as z,o as d,g as b,h as r,b as n,t as $,j as s,l as O,p as I,r as y,s as V,x as _,c as f,u as c,F as j,e as P,q as L,z as R,A as x,m as T,i as k,B as U}from"./index.a7ee99ae.js";const G={flex:"","items-center":""},H={"ml-auto":"",flex:"","gap-3":""},J=n("div",{"i-carbon-pen":""},null,-1),K=n("div",{"i-carbon-trash-can":""},null,-1),Q={flex:"","items-center":""},W={"flex-grow":""},X={"ml-auto":"",flex:"","gap-3":""},Y=N({props:{player:null},emits:["edit","delete"],setup(m){return(p,o)=>{const u=O,h=I,a=z("Skeletor");return m.player?(d(),b(h,{key:0,"md:w-170":"","w-full":"","mx-2":""},{default:r(()=>[n("div",G,[n("div",null,$(m.player.name),1),n("div",H,[s(u,{class:"btn btn-theme-warning","h-3rem":"","w-3rem":"",onClick:o[0]||(o[0]=e=>p.$emit("edit",m.player))},{default:r(()=>[J]),_:1}),s(u,{class:"btn btn-theme-danger","h-3rem":"","w-3rem":"",onClick:o[1]||(o[1]=e=>p.$emit("delete",m.player.id))},{default:r(()=>[K]),_:1})])])]),_:1})):(d(),b(h,{key:1,"md:w-170":"","w-full":"","mx-2":""},{default:r(()=>[n("div",Q,[n("div",W,[s(a,{height:"2rem",width:"70%"})]),n("div",X,[s(a,{height:"3rem",width:"3rem"}),s(a,{height:"3rem",width:"3rem"})])])]),_:1}))}}}),Z={key:0,container:"","mx-auto":"","px-4":""},ee={"text-2xl":"",flex:"","gap-1":""},te=n("hr",{"my-4":""},null,-1),ne={"text-center":""},le=k(" Add Player "),oe={key:0,flex:"","flex-col":"","gap-3":"","mt-3":"","items-center":"","w-full":""},ae={key:1,flex:"","flex-col":"","gap-3":"","mt-3":"","items-center":"","w-full":""},se={class:"flex"},ie=k(" Submit Player "),ue=N({props:{tournament:null},setup(m){const p=m,o=y(null),u=V({count:0,next_page:null,prev_page:null,results:null,total_pages:0}),h=R(),a=y(!1),e=V({id:null,name:""}),v=y(!1);function w(){_.get(`/tournaments/${p.tournament}/players`).then(l=>{Object.assign(u,l.data)})}_.get(`/tournaments/${p.tournament}`).then(l=>{o.value=l.data,w()});function D(){if(!!o.value){if(v.value=!0,e.id){_.put(`/players/${e.id}`,x.exports.pick(e,["name"])).then(()=>{var t;const l=(t=u.results)==null?void 0:t.find(g=>g.id===e.id);Object.assign(l,e),a.value=!1,C(),v.value=!1});return}_.post(`/tournaments/${o.value.id}/players`,x.exports.pick(e,["name"])).then(l=>{var t;(t=u.results)==null||t.unshift(l.data),C(),Object.assign(e,{name:""}),v.value=!1})}}function E(l){_.delete(`/players/${l}`).then(()=>{w()})}function M(l){Object.assign(e,x.exports.pick(l,["id","name"])),a.value=!0}function C(){a.value=!1}function A(){Object.assign(e,{id:null,name:""})}return(l,t)=>{const g=O,B=Y,F=U,q=T;return o.value?(d(),f("div",Z,[n("div",ee,[n("button",{"i-carbon-caret-left":"",onClick:t[0]||(t[0]=i=>c(h).back())}),n("h1",null,"Configure Players: "+$(o.value.name),1)]),te,n("div",ne,[s(g,{class:"btn btn-brand-primary",onClick:t[1]||(t[1]=i=>a.value=!0)},{default:r(()=>[le]),_:1})]),c(u).results?(d(),f("div",oe,[(d(!0),f(j,null,P(c(u).results,i=>{var S;return d(),b(B,{key:(S=i.id)!=null?S:0,player:i,onEdit:M,onDelete:E},null,8,["player"])}),128))])):(d(),f("div",ae,[(d(),f(j,null,P(5,i=>s(B,{key:`skeleton${i}`})),64))])),s(q,{show:a.value,"is-form":"",onClose:t[3]||(t[3]=i=>a.value=!1),onSubmit:D,onClosed:A},{title:r(()=>[k($(c(e).id?"Edit":"Add")+" Player ",1)]),footer:r(()=>[n("div",se,[s(g,{class:"ml-auto btn btn-brand-primary",type:"submit",loading:v.value},{default:r(()=>[ie]),_:1},8,["loading"])])]),default:r(()=>[s(F,{modelValue:c(e).name,"onUpdate:modelValue":t[2]||(t[2]=i=>c(e).name=i),label:"Player Name",type:"text",name:"name"},null,8,["modelValue"])]),_:1},8,["show"])])):L("",!0)}}});export{ue as default};
